[FE] Implement a pre-session survey for the investment session
Implement the pre-session survey flow for the investment session in the app. The survey will guide users through a set of questions to capture their financial goals and investment preferences before their advisory session. 



The flow includes

Updated session booking confirmation screen or updated session screen in the pre-survey state on the advisor tab

Multiple question screens (single and multiple-choice)

Confirmation screen after completion

Updated session screen in the post-survey state on the advisor tab



Design

Please check the design on the prototype mode to check the detailed flow and behavior



ACs

Session Booking Confirmation Screen

New design:

Confirmation details visible

Given the user is on the Session Booking Confirmation screen for the investment session

When the screen is displayed

Then the updated design shows the CTA to the investment survey along with the new description.

Survey entry point shown

Given the user is on the Session Booking Confirmation screen for the investment session

When they tap the CTA to the survey

Then the app navigates the user to the first survey question screen

Answer survey later button

Given the user is on the Session Booking Confirmation screen for the investment session

When the screen is displayed

Then the screen shows an “Answer survey later” button which navigates the user to the Session Home Screen on the Advisor Tab

Session Home Screen on the Advisor Tab

New designs: 

Survey not started yet (Pre-survey state)

Given the user is on the Session Home Screen on the Advisor Tab before completing the survey

When the screen is displayed

Then the updated design highlights that the survey has not been completed and provides a new title, description, and CTA to begin the survey.

Survey completion acknowledged without CTA (Post-survey state)

Given the user is on the Session Home Screen on the Advisor Tab after submitting the survey

When the screen is displayed

Then the updated design shows the survey as completed with a confirmation message.

And  there is no CTA to start the survey, and the UI instead shows the completed status.

Question Screens – Core Behavior

All questions are multiple-choice and required

CTA button state

Given the user is on any question screen

When no answer is selected

Then the “次へ” button remains inactive until an answer is selected.

CTA button active state

Given the user is on any question screen with at least one valid selection (or valid free-text entry when “その他” is chosen)

When the screen is displayed

Then the “次へ” button becomes active and tappable.

Free-text input (その他 option)

Given the user is on a question screen with a “その他” (Other) option

When they select the “その他” option

Then a free-text field appears for input.

Free-text input validation

Given the user has selected the “その他” option

When no text is entered in the free-text field

Then the “次へ” button remains inactive until text is filled.

Progress indicator

Given the user is on any question screen

When the screen renders

Then a progress indicator shows the current step out of total steps.

Progress indicator animation

Given the user moves to the next question

When the progress indicator updates

Then a glitter animation plays as implemented in the LP pre-session survey.

Close button tapped – confirmation popup

Given the user is on any question screen

When they tap the close (✕) button

Then the app shows the confirmation popup “このままページを閉じてもよろしいですか？” as implemented on the post-session survey by Rishan.

Discard confirmation – stay on page

Given the confirmation popup is shown

When the user taps “記入に戻る” (Return to editing)

Then the popup closes and the user remains on the same question screen with answers intact.

Discard confirmation – exit survey

Given the confirmation popup is shown

When the user taps “保存せずに閉じる” (Close without saving)

Then the survey closes and all answers are discarded.

Back navigation within survey

Given the user is on any question screen except the first

When they tap the back arrow

Then the previous question loads with their prior selections restored.

No auto-save or resume function

Given the user exits the survey before completion

When they reopen it later

Then no answers are restored and the survey restarts from the beginning.

Completion & Handoff

Completion screen

Given the user has answered the final question

When they tap “アンケートを提出する”

Then a Survey Complete screen appears confirming submission.

Return to advisory session

Given the user is on the Survey Complete screen

When they tap the CTA button “閉じる”

Then the app returns to the advisory session screen and marks the pre-session survey as completed for that session.

Errors, Localization, Accessibility, Analytics

Network error while submitting

Given the user is on the final question and taps “アンケートを提出する”

When submission fails due to a network error

Then the app displays an error screen: https://www.figma.com/design/fnCxddHpd5tOcjYxzliAxc/Habitto-App-UI--Sprint-Execution?node-id=144252-153026&t=w5U3lTdHqW5T6fgg-11



Figma Links:
https://www.figma.com/design/fnCxddHpd5tOcjYxzliAxc/Habitto-App-UI--Sprint-Execution?node-id=142436-171179&p=f&t=PaRBcKHht9mVbzNC-0
Labels: 
Components: 